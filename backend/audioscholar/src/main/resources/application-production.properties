# ===================================================================
# RENDER PRODUCTION â€“ 512 MB FINAL (NOV 2025)
# ===================================================================

# Logging overrides (minimal)
logging.file.name=
logging.level.root=WARN
logging.level.edu.cit.audioscholar=INFO

# Tomcat overrides (tiny)
server.tomcat.threads.max=15
server.tomcat.threads.min-spare=2
server.tomcat.accept-count=50
server.tomcat.connection-timeout=20000
server.tomcat.max-keep-alive-requests=100
server.tomcat.accesslog.enabled=false

# RabbitMQ overrides (lean)
spring.rabbitmq.listener.simple.concurrency=1
spring.rabbitmq.listener.simple.max-concurrency=1
spring.rabbitmq.listener.simple.prefetch=1

# Hikari overrides (if used)
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=2

# --- Memory Saving Toggles ---
spring.jmx.enabled=false
spring.jpa.open-in-view=false

# Cache override
spring.cache.type=caffeine
spring.cache.caffeine.spec=maximumSize=250,expireAfterAccess=8m

# Virtual threads
spring.threads.virtual.enabled=true

# CRITICAL: Force Render's dynamic port (with default fallback)
server.port=${PORT:10000}

# Jackson
spring.jackson.deserialization.fail-on-unknown-properties=false