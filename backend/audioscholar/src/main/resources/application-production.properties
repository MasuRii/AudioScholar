# ===================================================================
# application-production.properties
# THESE SETTINGS ONLY RUN ON RENDER
# ===================================================================

# 1. Disable File Logging (Save Disk I/O)
logging.file.name=
logging.pattern.file=
logging.level.root=WARN
logging.level.edu.cit.audioscholar=INFO

# 2. Limit Web Server Threads (Save RAM)
server.tomcat.threads.max=20
server.tomcat.accesslog.enabled=false
server.tomcat.threads.min-spare=2

# 3. Limit RabbitMQ Concurrency (Save CPU)
# Bump to 2 as per optimization guide (safe for free tier, better throughput)
spring.rabbitmq.listener.simple.concurrency=2
spring.rabbitmq.listener.simple.max-concurrency=2
spring.rabbitmq.listener.simple.prefetch=1

# 4. Lazy Init (Faster Startup)
spring.main.lazy-initialization=true

# 5. Database/Connection Pooling
spring.datasource.hikari.maximum-pool-size=5
spring.datasource.hikari.minimum-idle=2

# 6. Caching
spring.cache.type=caffeine
spring.cache.caffeine.spec=maximumSize=500,expireAfterAccess=10m

# 7. Virtual threads
spring.threads.virtual.enabled=true

# 8. Server Port
server.port=${PORT:8080}